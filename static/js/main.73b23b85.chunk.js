(this["webpackJsonpslot-machine"]=this["webpackJsonpslot-machine"]||[]).push([[0],{12:function(e,t,n){e.exports=n(20)},17:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var i,a,o,s,c,r=n(0),l=n.n(r),u=n(10),m=n.n(u),d=(n(17),n(1)),h=n(4),b=n(5),E=n(3),f=n(7),p=n(6),O=n(11),R=n(2),v=function(e){return e===B.FIXED},g=function(e){return[0,0,0].fill(M[e],0,3)},C=function(e){var t=[],n=[];return R.forEach(e,(function(e,i){L.find((function(a){R.isEqual(a.combination,e)&&function(e,t){return e===c.ANY||e===t}(a.line,i)&&t.push(a.id)&&n.push(i)}))})),{winningCombinations:t,winningLine:n}},N=function(e){var t=[],n=C(e),i=function(e){var t=[],n=[];return R.forEach(e,(function(e,i){e.includes(M[s.SEVEN])&&e.includes(M[s.CHERRY])&&t.push(k.CHERRY_SEVEN_ANY)&&n.push(i)})),{winningCombinations:t,winningLine:n}}(e),a=function(e){var t=[],n=[];return R.forEach(e,(function(e,i){e.every((function(e){return x.includes(e)}))&&(e[0]!==e[1]||e[0]!==e[2])&&t.push(k.BAR_ANY)&&n.push(i)})),{winningCombinations:t,winningLine:n}}(e);t.push(n.winningCombinations),t.push(i.winningCombinations),t.push(a.winningCombinations);var o=[];return o.push(n.winningLine),o.push(i.winningLine),o.push(a.winningLine),{winningCombinations:R.flatten(t),winningLines:R.flatten(o)}},S=function(e,t){var n=t.map((function(e){return(t=e)?L.find((function(e){return e.id===t})).reward:0;var t}));return n.length?e+R.sum(n):e},A=function(e,t){if(!e)return null;var n=e[t];return n&&(n[0]||n[1])?Object(d.a)({},n[1],n[0]):null},_=1,y=1,T=5e3;!function(e){e[e.ONE_BAR=0]="ONE_BAR",e[e.TWO_BAR=1]="TWO_BAR",e[e.SEVEN=2]="SEVEN",e[e.CHERRY=3]="CHERRY",e[e.THREE_BAR=4]="THREE_BAR"}(s||(s={})),function(e){e.TOP="Top",e.MIDDLE="Center",e.BOTTOM="Bottom",e.ANY="Any"}(c||(c={}));var w,B,j=[c.TOP,c.MIDDLE,c.BOTTOM];!function(e){e.FIRST="firstReel",e.SECOND="secondReel",e.THIRD="thirdReel"}(w||(w={})),function(e){e.RANDOM="Random",e.FIXED="Fixed"}(B||(B={}));var k,H=[s.THREE_BAR,s.ONE_BAR,s.TWO_BAR,s.SEVEN,s.CHERRY],D=(i={},Object(d.a)(i,s.THREE_BAR,"3xBAR"),Object(d.a)(i,s.ONE_BAR,"BAR"),Object(d.a)(i,s.TWO_BAR,"2xBAR"),Object(d.a)(i,s.SEVEN,"7"),Object(d.a)(i,s.CHERRY,"Cherry"),i),I=(s.THREE_BAR,s.ONE_BAR,s.TWO_BAR,s.SEVEN,s.CHERRY,[w.FIRST,w.SECOND,w.THIRD]),P=[s.ONE_BAR,s.TWO_BAR,s.SEVEN,s.CHERRY,s.THREE_BAR],M=P.map((function(e){var t=121*P[e];return 0===t?t:-Math.abs(t)})),Y=(a={},Object(d.a)(a,M[s.ONE_BAR],"/BAR.png"),Object(d.a)(a,M[s.TWO_BAR],"/2xBAR.png"),Object(d.a)(a,M[s.THREE_BAR],"/3xBAR.png"),Object(d.a)(a,M[s.SEVEN],"/7.png"),Object(d.a)(a,M[s.CHERRY],"/Cherry.png"),a),x=[M[s.ONE_BAR],M[s.TWO_BAR],M[s.THREE_BAR]];!function(e){e.CHERRIES_TOP="CHERRIES_TOP",e.CHERRIES_MIDDLE="CHERRIES_MIDDLE",e.CHERRIES_BOTTOM="CHERRIES_BOTTOM",e.SEVEN_ANY="SEVEN_ANY",e.CHERRY_SEVEN_ANY="CHERRY_SEVEN_ANY",e.THREE_BAR_ANY="THREE_BAR_ANY",e.TWO_BAR_ANY="TWO_BAR_ANY",e.ONE_BAR_ANY="ONE_BAR_ANY",e.BAR_ANY="BAR_ANY"}(k||(k={}));var L=[{combination:g(s.CHERRY),line:c.BOTTOM,reward:4e3,id:k.CHERRIES_BOTTOM},{combination:g(s.CHERRY),line:c.TOP,reward:2e3,id:k.CHERRIES_TOP},{combination:g(s.CHERRY),line:c.MIDDLE,reward:1e3,id:k.CHERRIES_MIDDLE},{combination:g(s.SEVEN),line:c.ANY,reward:150,id:k.SEVEN_ANY},{combination:[M[s.SEVEN],M[s.CHERRY]],line:c.ANY,reward:75,id:k.CHERRY_SEVEN_ANY},{combination:g(s.THREE_BAR),line:c.ANY,reward:50,id:k.THREE_BAR_ANY},{combination:g(s.TWO_BAR),line:c.ANY,reward:20,id:k.TWO_BAR_ANY},{combination:g(s.ONE_BAR),line:c.ANY,reward:10,id:k.ONE_BAR_ANY},{combination:x,line:c.ANY,reward:5,id:k.BAR_ANY}],W=(o={},Object(d.a)(o,c.TOP,"winner-top"),Object(d.a)(o,c.MIDDLE,"winner-middle"),Object(d.a)(o,c.BOTTOM,"winner-bottom"),Object(d.a)(o,c.ANY,"any-line"),function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var i;return Object(h.a)(this,n),(i=t.call(this,e)).start=i.setStartPosition(),i.timer=setInterval((function(){i.tick()}),100),i.state={position:0,customPosition:null,lastPosition:null,timeRemaining:0},i.forceUpdateHandler=i.forceUpdateHandler.bind(Object(E.a)(i)),i.reset=i.reset.bind(Object(E.a)(i)),i.tick=i.tick.bind(Object(E.a)(i)),i.setStartPosition=i.setStartPosition.bind(Object(E.a)(i)),i.moveBackground=i.moveBackground.bind(Object(E.a)(i)),i.getSymbolFromPosition=i.getSymbolFromPosition.bind(Object(E.a)(i)),i}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;clearInterval(this.timer),this.setState({position:this.start,timeRemaining:this.props.timer,customPosition:this.props.customPosition}),this.timer=setInterval((function(){e.tick()}),100)}},{key:"componentDidUpdate",value:function(e){e.customPosition!==this.props.customPosition&&this.setState({customPosition:this.props.customPosition})}},{key:"componentWillUnmount",value:function(){this.setState({position:0,customPosition:null,lastPosition:null,timeRemaining:0})}},{key:"forceUpdateHandler",value:function(){this.reset()}},{key:"reset",value:function(){var e=this;this.timer&&clearInterval(this.timer),this.start=this.setStartPosition(),this.setState({position:this.start,timeRemaining:this.props.timer}),this.timer=setInterval((function(){e.tick()}),100)}},{key:"setStartPosition",value:function(){return 121*Math.floor(5*Math.random())*-1}},{key:"moveBackground",value:function(){this.setState({position:this.state.position-n.speed,timeRemaining:(this.state.timeRemaining||100)-100})}},{key:"getSymbolFromPosition",value:function(){this.state.position;for(var e,t=this.props.timer/100*n.multiplier,i=this.start,a=0;a<t;a++)(i-=121)<-484&&(i=0);var o=(e={},Object(d.a)(e,c.TOP,function(e){var t=R.indexOf(M,e);return t===s.ONE_BAR?M[s.THREE_BAR]:M[t-1]}(i)),Object(d.a)(e,c.MIDDLE,i),Object(d.a)(e,c.BOTTOM,function(e){var t=R.indexOf(M,e);return t===s.THREE_BAR?M[s.ONE_BAR]:M[t+1]}(i)),e);this.props.onFinish(o)}},{key:"tick",value:function(){this.state.timeRemaining<=0?(clearInterval(this.timer),this.getSymbolFromPosition()):this.moveBackground()}},{key:"render",value:function(){var e=this.state,t=e.position;Object(O.a)(e,["position"]);return r.createElement("div",{style:{backgroundPosition:"0px "+t+"px"},className:"icons"})}}]),n}(r.Component));W.multiplier=Math.floor(3*Math.random()+1),W.speed=121*W.multiplier;var F,U=W,V=n(8),q=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var i,a;return Object(h.a)(this,n),(a=t.call(this,e)).state=(i={},Object(d.a)(i,w.FIRST,["",""]),Object(d.a)(i,w.SECOND,["",""]),Object(d.a)(i,w.THIRD,["",""]),Object(d.a)(i,"mode",B.RANDOM),Object(d.a)(i,"errors",[]),Object(d.a)(i,"isConfirmed",!1),i),a.toggleModeChoice=a.toggleModeChoice.bind(Object(E.a)(a)),a.handleSymbolChoice=a.handleSymbolChoice.bind(Object(E.a)(a)),a.handlePositionChoice=a.handlePositionChoice.bind(Object(E.a)(a)),a.handleConfirm=a.handleConfirm.bind(Object(E.a)(a)),a}return Object(b.a)(n,[{key:"toggleModeChoice",value:function(e){var t,n=v(e.target.value)?B.RANDOM:B.FIXED;(this.setState({mode:n}),v(n))||this.setState((t={},Object(d.a)(t,w.FIRST,["",""]),Object(d.a)(t,w.SECOND,["",""]),Object(d.a)(t,w.THIRD,["",""]),Object(d.a)(t,"isConfirmed",!1),Object(d.a)(t,"errors",[]),t));this.props.onModeChoice(n)}},{key:"handleSymbolChoice",value:function(e,t){var n=e.target.value?e.target.value:"";this.setState(Object(V.a)(Object(V.a)({},this.state),{},Object(d.a)({isConfirmed:!1},t,[n,this.state[t][1]]))),R.includes(this.state.errors,t)&&this.setState({errors:R.pull(this.state.errors,t)})}},{key:"handlePositionChoice",value:function(e,t){var n=e.target.value?e.target.value:"";this.setState(Object(V.a)(Object(V.a)({},this.state),{},Object(d.a)({isConfirmed:!1},t,[this.state[t][0],n]))),R.includes(this.state.errors,t)&&this.setState({errors:R.pull(this.state.errors,t)})}},{key:"handleConfirm",value:function(){var e=[];R.forEach(this.state,(function(t,n){R.isArray(t)&&R.includes(I,n)&&(!t[0]&&t[1]||t[0]&&!t[1])&&e.push(n)})),this.setState({errors:e}),0===e.length&&(this.setState({isConfirmed:!0}),this.props.onCombinationChoice(R.pick(this.state,I)))}},{key:"generateSymbolsOptions",value:function(){var e=[];return R.map(H,(function(t){e.push(r.createElement("option",{value:M[t],key:D[t]},D[t]))})),e.unshift(r.createElement("option",{value:"",key:"defaultSymbol"},"- - -")),e}},{key:"generatePositionOptions",value:function(){var e=j.map((function(e,t){return r.createElement("option",{value:e,key:e+t},e)}));return e.unshift(r.createElement("option",{value:"",key:"defaultPosition"},"- - -")),e}},{key:"generateRows",value:function(){var e=this;return I.map((function(t,n){return r.createElement("tr",{key:t+n,className:R.includes(e.state.errors,t)?"is-incorrect":""},r.createElement("td",null,"Reel ",n+1),r.createElement("td",null,r.createElement("select",{name:"symbols-".concat(t),id:"symbols-".concat(t),value:e.state[t][0],onChange:function(n){return e.handleSymbolChoice(n,t)},disabled:!v(e.state.mode)},e.generateSymbolsOptions())),r.createElement("td",null,r.createElement("select",{name:"position-".concat(t),id:"position-".concat(t),value:e.state[t][1],onChange:function(n){return e.handlePositionChoice(n,t)},disabled:!v(e.state.mode)},e.generatePositionOptions())))}))}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:"debug-area-container"},r.createElement("div",{className:"mode-choice-container d-flex flex-row my-3"},r.createElement("label",{className:"switch mb-0"},r.createElement("input",{type:"checkbox",value:this.state.mode,onChange:function(t){return e.toggleModeChoice(t)}}),r.createElement("span",{className:"slider round"})),r.createElement("p",{className:"mb-0 ml-2"},"Mode: ",this.state.mode)),r.createElement("div",{className:"debug-area-table-container"},r.createElement("div",{className:"debug-area-table-with-errors"},r.createElement("table",{className:"debug-area-table w-100 mb-1"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Reel"),r.createElement("th",null,"Symbol"),r.createElement("th",null,"Position"))),r.createElement("tbody",null,this.generateRows())),this.state.errors.length>0?r.createElement("p",{className:"error-message mb-1"},"Both or neither values should be provided"):r.createElement("div",{className:"placeholder"})),this.state.isConfirmed&&r.createElement("p",{className:"mb-0 text-success d-inline-block confirmation-message"},"Changes applied \u2713"),r.createElement("button",{type:"submit",className:"btn btn-light float-right",disabled:!v(this.state.mode),onClick:function(){return e.handleConfirm()}},"Confirm")))}}]),n}(r.Component),K=function(e){return r.createElement("div",{className:"balance-container d-flex flex-row mb-4"},r.createElement("div",{className:"mr-3 input-balance"},r.createElement("label",{htmlFor:"balance"},"Total Balance"),r.createElement("input",{type:"number",id:"balance",name:"balance",min:1,max:5e3,placeholder:"Enter 1-5000",autoComplete:"off",onDrop:function(){return!1},disabled:e.disabled,value:e.balance,onChange:function(t){return e.onChange(t)}})),r.createElement("div",{className:"input-bet"},r.createElement("label",{htmlFor:"bet"},"Bet"),r.createElement("input",{type:"number",id:"bet",name:"bet",min:1,max:1,value:"1",autoComplete:"off",disabled:!0})))},X=function(e){var t=e.disabled?r.createElement("span",{className:"spinner-border text-light"}):"SPIN";return r.createElement("button",{className:"spin-button btn btn-success","aria-label":"SPIN!",disabled:e.disabled,onClick:e.onClick},t)},J=function(e){var t=L[e.combinationIndex].combination.map((function(t,n){return r.createElement("img",{src:Y[t],height:"30",alt:t.toString(),key:Y[t]+e.combinationIndex+n})}));return r.createElement("td",null,8!==e.combinationIndex?t:"Any 3 BARs")},$=function(e){return r.createElement("tr",{id:e.combinationData.id,className:"".concat(Object(R.includes)(e.winningCombination,e.combinationData.id)?"winning-row":"")},r.createElement(J,{combinationIndex:e.combinationDataIndex}),r.createElement("td",null,L[e.combinationDataIndex].line),r.createElement("td",null,L[e.combinationDataIndex].reward))},z=function(e){var t=Object(R.uniq)(e.winningCombination);return r.createElement("div",{className:"pay-table-container"},r.createElement("table",null,r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Combination"),r.createElement("th",null,"Line"),r.createElement("th",null,"Reward"))),r.createElement("tbody",null,L.map((function(e,n){return r.createElement($,{key:e.id,combinationData:e,combinationDataIndex:n,winningCombination:t})})))))},G=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var i;return Object(h.a)(this,n),(i=t.call(this,e))._child1=void 0,i._child2=void 0,i._child3=void 0,i.state={winningCombination:null,balance:5e3,isSpinning:!1,isInitialSpin:!0,mode:B.RANDOM,customReels:{}},i.finishHandler=i.finishHandler.bind(Object(E.a)(i)),i.modeChoiceHandler=i.modeChoiceHandler.bind(Object(E.a)(i)),i.combinationChoiceHandler=i.combinationChoiceHandler.bind(Object(E.a)(i)),i.handleSpinButtonClick=i.handleSpinButtonClick.bind(Object(E.a)(i)),i.handleBalanceChange=i.handleBalanceChange.bind(Object(E.a)(i)),i.emptyMatches=i.emptyMatches.bind(Object(E.a)(i)),i}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.setState({isSpinning:!0}),function(){var e,t=document.querySelector("#add-button");t.style.display="none",window.addEventListener("beforeinstallprompt",(function(n){n.preventDefault(),e=n,t.style.display="block",t.addEventListener("click",(function(n){t.style.display="none",e.prompt(),e.userChoice.then((function(t){"accepted"===t.outcome?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),e=null}))}))}))}()}},{key:"componentWillUnmount",value:function(){this.setState({winningCombination:null,balance:5e3,isSpinning:!1,isInitialSpin:!0,mode:B.RANDOM,customReels:{}})}},{key:"handleSpinButtonClick",value:function(){var e;this.setState({isInitialSpin:!1,winningCombination:null,isSpinning:!0,balance:(e=this.state.balance,e-_>0?e-_:0)}),this.emptyMatches(),this._child1.forceUpdateHandler(),this._child2.forceUpdateHandler(),this._child3.forceUpdateHandler()}},{key:"handleBalanceChange",value:function(e){var t;this.setState({balance:(t=Number(e.target.value),t>0&&t<=T?t:t>T?T:t<=0?y:t)})}},{key:"modeChoiceHandler",value:function(e){this.setState({mode:e})}},{key:"combinationChoiceHandler",value:function(e){this.setState({customReels:e})}},{key:"finishHandler",value:function(e){if(n.matches[c.TOP].push(e[c.TOP]),n.matches[c.MIDDLE].push(e[c.MIDDLE]),n.matches[c.BOTTOM].push(e[c.BOTTOM]),i=n.matches,Object.values(i).every((function(e){return 3===e.length}))){this.state.winningCombination;var t=this.state.isInitialSpin?[]:N(n.matches).winningCombinations;this.setState({winningCombination:t,isSpinning:!1,balance:S(this.state.balance,t)})}var i}},{key:"emptyMatches",value:function(){var e;n.matches=(e={},Object(d.a)(e,c.TOP,[]),Object(d.a)(e,c.MIDDLE,[]),Object(d.a)(e,c.BOTTOM,[]),e)}},{key:"render",value:function(){var e=this,t=this.state.winningCombination,i=this.state.isInitialSpin?[]:N(n.matches).winningLines;return r.createElement("div",{className:"app-container container"},r.createElement("div",{className:"row justify-content-center"},r.createElement("div",{className:"main-content col-4"},r.createElement("div",{className:"d-flex flex-column mt-2"},r.createElement("h1",{className:""},"Slot Machine")),r.createElement("div",{className:"spinner-container"},r.createElement(U,{onFinish:this.finishHandler,ref:function(t){e._child1=t},timer:2e3,customPosition:A(this.state.customReels,w.FIRST)}),r.createElement(U,{onFinish:this.finishHandler,ref:function(t){e._child2=t},timer:2500,customPosition:A(this.state.customReels,w.SECOND)}),r.createElement(U,{onFinish:this.finishHandler,ref:function(t){e._child3=t},timer:3e3,customPosition:A(this.state.customReels,w.THIRD)}),r.createElement("div",{className:"gradient-fade"}),i.includes(c.TOP)&&!this.state.isSpinning&&r.createElement("div",{className:"winner winner-top"}),i.includes(c.MIDDLE)&&!this.state.isSpinning&&r.createElement("div",{className:"winner winner-middle"}),i.includes(c.BOTTOM)&&!this.state.isSpinning&&r.createElement("div",{className:"winner winner-bottom"})),r.createElement("div",{className:"balance-section d-flex flex-row justify-content-between px-3"},r.createElement(K,{disabled:this.state.isSpinning,balance:this.state.balance,onChange:this.handleBalanceChange}),r.createElement(X,{onClick:this.handleSpinButtonClick,disabled:this.state.isSpinning||0===this.state.balance})),r.createElement(z,{winningCombination:t||[]}),r.createElement("div",{className:"d-flex flex-column justify-content-center"},r.createElement(q,{onModeChoice:this.modeChoiceHandler,onCombinationChoice:this.combinationChoiceHandler})),r.createElement("button",{id:"add-button",className:"add-button btn btn-primary"},"Add to home screen"))))}}]),n}(r.Component);G.matches=(F={},Object(d.a)(F,c.TOP,[]),Object(d.a)(F,c.MIDDLE,[]),Object(d.a)(F,c.BOTTOM,[]),F);var Q=G,Z=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ee(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}m.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(Q,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_PUBLIC_URL||"",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Z?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var i=n.headers.get("content-type");404===n.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ee(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ee(t,e)}))}}()}},[[12,1,2]]]);
//# sourceMappingURL=main.73b23b85.chunk.js.map